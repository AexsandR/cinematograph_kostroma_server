{% extends "screen.html" %}
{% block content1 %}
<style>
    .error_name{
        background: red;
        color: white;
        font-size: 21px;
        width: auto;
        display: inline-block
    }
</style>
<form method="post" action="/editForm/{{ type }}" enctype="multipart/form-data">
    <div class="file-input-wrapper">
        <a href="/" class="custom-button" style="width: 100%">назад</a>
    </div>
    {% if error %}
    <div class="error_name">Такой фильм уже есть</div>
    <div class>Такой фильм уже есть</div>

    {% endif %}
    <p>
        Название фильма:
        <input class="input_text" name="name" value="{{ name }}" type="text"/>
    </p>
    <p>
        Описание фильма:<br/>
        <textarea maxlength='300' class="text_area" name="description" required>{{ description }}</textarea>
    </p>


    <p>
        Превью фильма:<br>
        <img id="previewImage" class="edit_preview" src="/api/get_images/{{ id_img }}">
        <br>
    <div class="file-input-wrapper">
        <button type="button" class="custom-button" onclick="document.getElementById('filePreview1').click()">
            Изменить превью
        </button>
        <input name="filePreview" type="file" id="filePreview1" accept="image/png, image/gif, image/jpeg"
               style="display: none;"
               onchange="addFiles(this.files, 'fileListPreview')">

        <div id="fileListPreview" class="file-list"></div>
    </div>
    </p>
    <p>
        Новела к фильму:<br>
        {% for id in id_frames %}
        Кадр: {{ id[0] + 1 }}
        <br>
        <img class="edit_preview" src="/api/get_frame/{{ id[1] }}">
        <br>
    <div class="file-input-wrapper">
        <button type="button" class="custom-button" onclick="document.getElementById('fileFrame1').click()">
            Изменить кадр
        </button>
        <input type="file" name="fileFrame{{ id[0] + 1}}" id="fileFrame{{ id[0] + 1}}"
               accept="image/png, image/gif, image/jpeg"
               style="display: none;"
               onchange="addFiles(this.files, 'file_frame{{ id[0] + 1}}')">
        <div id="file_frame{{ id[0] + 1}}" class="file-list"></div>
    </div>
    {% endfor %}
    {% for id in create_frame %}
    Кадр: {{ id + 1}}
    <br>
    <div class="file-input-wrapper">
        <button type="button" class="custom-button" onclick="document.getElementById('fileFrame1').click()">
            добавить кадр
        </button>
        <input type="file" name="fileFrame{{ id + 1}}" id="fileFrame{{ id + 1}}"
               accept="image/png, image/gif, image/jpeg"
               style="display: none;"
               onchange="addFiles(this.files, 'file_frame{{ id + 1}}')">
        <div id="file_frame{{ id + 1}}" class="file-list"></div>
    </div>
    {% endfor %}
    <div class="file-input-wrapper">
        <input class="custom-button" type="submit" value="Приянть изменеия" required/>
    </div>

    <!--    <div class="file-input-wrapper">-->
    <!--        <button class="custom-button" onclick="document.getElementById('fileFrames').click()">Выбрать файлы</button>-->
    <!--        <input type="file" id="fileFrames" name="fileFrames" required multiple accept="image/png, image/gif, image/jpeg"-->
    <!--               style="display: none;"-->
    <!--               onchange="addFiles(this.files, 'fileListFrames')">-->

    <!--        <div id="fileListFrames" class="file-list"></div>-->
    <!--    </div>-->
    <!--    </p>-->


</form>

{% endblock %}



